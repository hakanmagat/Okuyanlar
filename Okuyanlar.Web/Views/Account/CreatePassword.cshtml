@model Okuyanlar.Web.Models.CreatePasswordViewModel

@{
    ViewData["Title"] = "Hesabý Aktifleþtir";
}

<div class="container" style="max-width: 760px; padding-top: 3rem;">
    <div class="ok-card">
        <div class="ok-card-header" style="display:flex; align-items:center; gap:.75rem;">
            <i class="bi bi-shield-lock-fill" style="font-size:1.2rem;"></i>
            <span>Hesabý Aktifleþtir</span>
        </div>

        <div class="ok-card-body">
            <p style="margin-bottom:1.25rem; opacity:.85;">
                <strong>@Model.Email</strong> için þifreni belirle ve hesabýný aktif et.
            </p>

            <form asp-action="CreatePassword" method="post" class="ok-flex ok-flex-col ok-gap-2">
                @Html.AntiForgeryToken()
                <div asp-validation-summary="ModelOnly" class="text-danger mb-2"></div>

                <input type="hidden" asp-for="Token" />
                <input type="hidden" asp-for="Email" />

                <div class="ok-grid ok-grid-2" style="gap:1rem;">
                    <div>
                        <label class="ok-form-label">Yeni Þifre</label>
                        <div class="ok-input-group" style="position:relative;">
                            <span class="ok-input-group-text"><i class="bi bi-lock"></i></span>
                            <input id="cpPassword" asp-for="Password" class="ok-form-control" type="password" placeholder="••••••••" />
                            <button type="button"
                                    class="ok-toggle-pass"
                                    data-toggle-password="#cpPassword"
                                    aria-label="Parolayý göster/gizle"
                                    style="
                                        position:absolute; right:10px; top:50%; transform:translateY(-50%);
                                        border:0; background:transparent; width:40px; height:40px; border-radius:12px;
                                        display:inline-flex; align-items:center; justify-content:center; color:var(--ok-btn);
                                    ">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <span asp-validation-for="Password" class="text-danger"></span>
                        <small class="text-muted" style="display:block; margin-top:.4rem;">
                            En az 8 karakter önerilir. Harf + sayý iyi fikir.
                        </small>
                    </div>

                    <div>
                        <label class="ok-form-label">Þifre (Tekrar)</label>
                        <div class="ok-input-group" style="position:relative;">
                            <span class="ok-input-group-text"><i class="bi bi-lock"></i></span>
                            <input id="cpConfirm" asp-for="ConfirmPassword" class="ok-form-control" type="password" placeholder="••••••••" />
                            <button type="button"
                                    class="ok-toggle-pass"
                                    data-toggle-password="#cpConfirm"
                                    aria-label="Parolayý göster/gizle"
                                    style="
                                        position:absolute; right:10px; top:50%; transform:translateY(-50%);
                                        border:0; background:transparent; width:40px; height:40px; border-radius:12px;
                                        display:inline-flex; align-items:center; justify-content:center; color:var(--ok-btn);
                                    ">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                    </div>
                </div>

                <div class="ok-mt-2" style="background: var(--ok-bg); border: 1px solid var(--ok-border); border-radius: 14px; padding: 1rem;">
                    <div class="ok-form-check" style="align-items:flex-start;">
                        <input asp-for="KvkkAccepted" class="ok-form-check-input" id="kvkk" />
                        <div>
                            <label for="kvkk" class="ok-form-label" style="margin:0; cursor:pointer;">
                                KVKK Aydýnlatma Metni’ni okudum ve kabul ediyorum.
                            </label>
                            <div class="text-muted" style="font-size:.9rem; margin-top:.25rem;">
                                Kabul etmeden hesabý aktif edemeyiz.
                            </div>
                            <span asp-validation-for="KvkkAccepted" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="ok-mt-3 ok-flex ok-justify-between ok-items-center" style="gap:1rem; flex-wrap:wrap;">
                    <a asp-controller="Account" asp-action="Login" class="btn-ok-secondary">
                        <i class="bi bi-arrow-left me-2"></i> Giriþe dön
                    </a>

                    <button type="submit" class="btn-ok-primary" style="min-width: 280px;">
                        <i class="bi bi-check2-circle me-2"></i> Hesabý Aktifleþtir
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
