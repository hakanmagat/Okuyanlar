@using System.Linq
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model IEnumerable<Okuyanlar.Core.Entities.Book>

@{
    ViewData["Title"] = "Books";
}

<div class="ok-section">
    <div class="container ok-container">

        <!-- Page Header -->
        <div class="ok-flex ok-items-center ok-justify-between ok-mb-4 ok-flex-wrap ok-gap-2">
            <h1 style="font-weight:900;">
                <i class="bi bi-bookshelf me-2" style="color:var(--ok-accent);"></i>
                Library Catalog
            </h1>

            <span class="ok-badge ok-badge-accent">
                @Model?.Count() ?? 0 Books
            </span>
        </div>

        @if (Model != null && Model.Any())
        {
            <div class="ok-grid ok-grid-4">
                @foreach (var book in Model)
                {
                    <div class="ok-book-card">
                        <img src="https://via.placeholder.com/300x400?text=No+Cover"
                             alt="@book.Title"
                             class="ok-book-cover" />

                        <div class="ok-book-body">
                            <div class="ok-book-title">@book.Title</div>
                            <div class="ok-book-author">by @book.Author</div>

                            <div class="ok-book-meta">
                                @if (book.Stock > 0)
                                {
                                    <span class="ok-badge ok-badge-success">Available</span>
                                }
                                else
                                {
                                    <span class="ok-badge ok-badge-secondary">Unavailable</span>
                                }
                            </div>

                            <a asp-controller="Books"
                               asp-action="Details"
                               asp-route-id="@book.Id"
                               class="btn-ok-secondary ok-mt-3"
                               style="display:block; text-align:center;">
                                View Details
                            </a>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="ok-card text-center" style="padding:3rem;">
                <i class="bi bi-inbox" style="font-size:3rem; color:var(--ok-accent); opacity:.5;"></i>
                <p class="ok-mt-2" style="font-weight:800; opacity:.8;">
                    No books found.
                </p>
            </div>
        }
    </div>
</div>
